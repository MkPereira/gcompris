%define ver      	@VERSION@
%define RELEASE 	1
%define rel     	%{?CUSTOM_RELEASE} %{!?CUSTOM_RELEASE:%RELEASE}
%define prefix		/usr
%define canvaspackage	%(if rpm -q redhat-release &> /dev/null; then echo gdk-pixbuf-gnome; elif rpm -q mandrake-release &> /dev/null; then echo gdk-pixbuf-gnomecanvas; else echo; fi)

Summary: Educational suite for kids 3-10 years old
Name: 		gcompris
Version: 	%ver
Release: 	%rel
Copyright: 	GPL
Group: 		Amusements/Games
Source:		ftp://gcompris.sourceforge.net/gcompris-%{PACKAGE_VERSION}.tar.gz
BuildRoot: 	/var/tmp/gcompris-%{PACKAGE_VERSION}-root
URL: 		http://ofset.sf.net/gcompris
Docdir: 	%{prefix}/share/doc/gcompris-%{PACKAGE_VERSION}
Requires:	gnome-libs libxml2 gdk-pixbuf %canvaspackage
Requires:       gnuchess >= 5.02
Requires:       libassetml @REQUIRE_PYTHON@
Requires:	assetml-flags
Packager:       Bruno Coudoin <bcoudoin.coudoin@free.fr>

%description
GCompris / I Have Understood is an educationnal game for children starting at 3.
More than 40 different activities are proposed:
* Click on the animals => learn the mouse/click usage
* Type the falling letters => learn the keyboard usage
* Falling Dices
* Falling words
* Basic algebra
* Time learning with an analog clock
* Puzzle game with famous paintings
* Drive Plane to catch clouds in increasing number
* Balance the scales
* And much more ...

The Game is included in the Main desktop menu in 'Games'.

You should install it only if you have children using this computer.

%description -l fr
GCompris / J'ai Compris est un logiciel éducatif pour les enfants 
à partir de 3 ans.

Plus de 40 activités sont proposées :
* Cliquer sur les animaux => apprentissage du click et de la souris
* Entrer les lettres qui tombent => Apprentissage du clavier
* Les dés qui tombent
* Les mots qui tombent
* Algèbre simple
* Apprentissage de la lecture de l'heure sur une horloge analogique
* Puzzle avec des tableaux célèbres
* Pilote un avion pour attraper les nuages dans l'ordre
* Equilibre la balance
* ...

Le jeu est inclus dans les icones sous le menu Jeux.

A installer si vous avez des enfants utilisant cet ordinateur.

%package -n assetml-voices-alphabet-de
Summary:        Alphabet voices in German
Group: 		Amusements/Games
Version: @VERSION_VOICES_ALPHABET_DE@

%description -n assetml-voices-alphabet-de
Alphabet voices in German

%package -n assetml-voices-colors-de
Summary:        Colors voices in German
Group: 		Amusements/Games
Version: @VERSION_VOICES_COLORS_DE@

%description -n assetml-voices-colors-de
Colors voices in German

%package -n assetml-voices-geography-de
Summary:        Country name voices in German
Group: 		Amusements/Games
Version: @VERSION_VOICES_GEOGRAPHY_DE@

%description -n assetml-voices-geography-de
Country name voices in German

%package -n assetml-voices-misc-de
Summary:        Miscelaneous voices in German
Group: 		Amusements/Games
Version: @VERSION_VOICES_MISC_DE@

%description -n assetml-voices-misc-de
Miscelaneous voices in German


%package -n assetml-voices-alphabet-en
Summary:        Alphabet voices in English
Group: 		Amusements/Games
Version: @VERSION_VOICES_ALPHABET_EN@

%description -n assetml-voices-alphabet-en
Alphabet voices in English

%package -n assetml-voices-colors-en
Summary:        Colors voices in English
Group: 		Amusements/Games
Version: @VERSION_VOICES_COLORS_EN@

%description -n assetml-voices-colors-en
Colors voices in English

%package -n assetml-voices-geography-en
Summary:        Country name voices in English
Group: 		Amusements/Games
Version: @VERSION_VOICES_GEOGRAPHY_EN@

%description -n assetml-voices-geography-en
Country name voices in English

%package -n assetml-voices-misc-en
Summary:        Miscelaneous voices in English
Group: 		Amusements/Games
Version: @VERSION_VOICES_MISC_EN@

%description -n assetml-voices-misc-en
Miscelaneous voices in English


%package -n assetml-voices-alphabet-es
Summary:        Alphabet voices in Spanish
Group: 		Amusements/Games
Version: @VERSION_VOICES_ALPHABET_ES@

%description -n assetml-voices-alphabet-es
Alphabet voices in Spanish

%package -n assetml-voices-colors-es
Summary:        Colors voices in Spanish
Group: 		Amusements/Games
Version: @VERSION_VOICES_COLORS_ES@

%description -n assetml-voices-colors-es
Colors voices in Spanish

%package -n assetml-voices-geography-es
Summary:        Country name voices in Spanish
Group: 		Amusements/Games
Version: @VERSION_VOICES_GEOGRAPHY_ES@

%description -n assetml-voices-geography-es
Country name voices in Spanish

%package -n assetml-voices-misc-es
Summary:        Miscelaneous voices in Spanish
Group: 		Amusements/Games
Version: @VERSION_VOICES_MISC_ES@

%description -n assetml-voices-misc-es
Miscelaneous voices in Spanish


%package -n assetml-voices-alphabet-fr
Summary:        Alphabet voices in French
Group: 		Amusements/Games
Version: @VERSION_VOICES_ALPHABET_FR@

%description -n assetml-voices-alphabet-fr
Alphabet voices in French

%package -n assetml-voices-colors-fr
Summary:        Colors voices in French
Group: 		Amusements/Games
Version: @VERSION_VOICES_COLORS_FR@

%description -n assetml-voices-colors-fr
Colors voices in French

%package -n assetml-voices-geography-fr
Summary:        Country name voices in French
Group: 		Amusements/Games
Version: @VERSION_VOICES_GEOGRAPHY_FR@

%description -n assetml-voices-geography-fr
Country name voices in French

%package -n assetml-voices-misc-fr
Summary:        Miscelaneous voices in French
Group: 		Amusements/Games
Version: @VERSION_VOICES_MISC_FR@

%description -n assetml-voices-misc-fr
Miscelaneous voices in French


%package -n assetml-voices-alphabet-pt
Summary:        Alphabet voices in Portuguese
Group: 		Amusements/Games
Version: @VERSION_VOICES_ALPHABET_PT@

%description -n assetml-voices-alphabet-pt
Alphabet voices in Portuguese

%package -n assetml-voices-colors-pt
Summary:        Colors voices in Portuguese
Group: 		Amusements/Games
Version: @VERSION_VOICES_COLORS_PT@

%description -n assetml-voices-colors-pt
Colors voices in Portuguese

%package -n assetml-voices-geography-pt
Summary:        Country name voices in Portuguese
Group: 		Amusements/Games
Version: @VERSION_VOICES_GEOGRAPHY_PT@

%description -n assetml-voices-geography-pt
Country name voices in Portuguese

%package -n assetml-voices-misc-pt
Summary:        Miscelaneous voices in Portuguese
Group: 		Amusements/Games
Version: @VERSION_VOICES_MISC_PT@

%description -n assetml-voices-misc-pt
Miscelaneous voices in Portuguese


%package -n assetml-flags
Summary:        Contains png 60x40 country flags and an assetml description file
Group: 		Pixmaps
Version: @VERSION_FLAGS@

%description -n assetml-flags
Contains png 60x40 country flags and an assetml description file

%prep
%setup -q

%build
%ifarch alpha
  MYARCH_FLAGS="--host=alpha-redhat-linux"
%endif

CFLAGS="$RPM_OPT_FLAGS" ./configure --quiet $MYARCH_FLAGS --prefix=%{prefix} \
	 --localstatedir=/var/lib

if [ "$SMP" != "" ]; then
  make -j$SMP MAKE="make -j$SMP"
else
  make
fi

%install
rm -rf $RPM_BUILD_ROOT

make prefix=$RPM_BUILD_ROOT%{prefix} install >install.log 2>&1

%clean
rm -rf $RPM_BUILD_ROOT

%post 

%postun 

%files
%defattr(-, root, root)
%doc ABOUT-NLS AUTHORS COPYING ChangeLog INSTALL NEWS README TODO THANKS
%attr(-, root, games) %{prefix}/bin/*
%{prefix}/lib/gcompris
%{_menudir}/*
%dir %{prefix}/share/gcompris
%dir %{prefix}/share/gcompris/boards
%dir %{prefix}/share/gcompris/boards/skins
%{prefix}/share/gcompris/boards/skins/*
%{prefix}/share/gcompris/boards/[^fs]*
%{prefix}/share/gcompris/boards/f[iu]*
%{prefix}/share/gcompris/boards/s[cmu]*
%dir %{prefix}/share/gcompris/boards/sounds
%{prefix}/share/gcompris/boards/sounds/*.ogg
%{prefix}/share/gcompris/boards/sounds/HOWTO_ENCODE
%{prefix}/share/applications/*
%{prefix}/share/gnome/help/*
%{prefix}/share/locale/*/*/*
%{prefix}/share/pixmaps/*.png
%{prefix}/info/*

%files -n assetml-voices-alphabet-de
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/de/alphabet
%{prefix}/share/@ASSETML_DIR@/gcompris_alphabet_de.assetml

%files -n assetml-voices-colors-de
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/de/colors
%{prefix}/share/@ASSETML_DIR@/gcompris_colors_de.assetml

%files -n assetml-voices-geography-de
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/de/geography
%{prefix}/share/@ASSETML_DIR@/gcompris_geography_de.assetml

%files -n assetml-voices-misc-de
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/de/misc
%{prefix}/share/@ASSETML_DIR@/gcompris_misc_de.assetml


%files -n assetml-voices-alphabet-en
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/en/alphabet
%{prefix}/share/@ASSETML_DIR@/gcompris_alphabet_en.assetml

%files -n assetml-voices-colors-en
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/en/colors
%{prefix}/share/@ASSETML_DIR@/gcompris_colors_en.assetml

%files -n assetml-voices-geography-en
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/en/geography
%{prefix}/share/@ASSETML_DIR@/gcompris_geography_en.assetml

%files -n assetml-voices-misc-en
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/en/misc
%{prefix}/share/@ASSETML_DIR@/gcompris_misc_en.assetml


%files -n assetml-voices-alphabet-es
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/es/alphabet
%{prefix}/share/@ASSETML_DIR@/gcompris_alphabet_es.assetml

%files -n assetml-voices-colors-es
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/es/colors
%{prefix}/share/@ASSETML_DIR@/gcompris_colors_es.assetml

%files -n assetml-voices-geography-es
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/es/geography
%{prefix}/share/@ASSETML_DIR@/gcompris_geography_es.assetml

%files -n assetml-voices-misc-es
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/es/misc
%{prefix}/share/@ASSETML_DIR@/gcompris_misc_es.assetml


%files -n assetml-voices-alphabet-fr
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/fr/alphabet
%{prefix}/share/@ASSETML_DIR@/gcompris_alphabet_fr.assetml

%files -n assetml-voices-colors-fr
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/fr/colors
%{prefix}/share/@ASSETML_DIR@/gcompris_colors_fr.assetml

%files -n assetml-voices-geography-fr
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/fr/geography
%{prefix}/share/@ASSETML_DIR@/gcompris_geography_fr.assetml

%files -n assetml-voices-misc-fr
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/fr/misc
%{prefix}/share/@ASSETML_DIR@/gcompris_misc_fr.assetml


%files -n assetml-voices-alphabet-pt
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/pt/alphabet
%{prefix}/share/@ASSETML_DIR@/gcompris_alphabet_pt.assetml

%files -n assetml-voices-colors-pt
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/pt/colors
%{prefix}/share/@ASSETML_DIR@/gcompris_colors_pt.assetml

%files -n assetml-voices-geography-pt
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/pt/geography
%{prefix}/share/@ASSETML_DIR@/gcompris_geography_pt.assetml

%files -n assetml-voices-misc-pt
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/pt/misc
%{prefix}/share/@ASSETML_DIR@/gcompris_misc_pt.assetml

%files -n assetml-flags
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/flags/*
%{prefix}/share/@ASSETML_DIR@/gcompris_flags.assetml

