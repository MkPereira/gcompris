%define name		gcompris
%define version      	@VERSION@
%define RELEASE 	1
%define rel     	%{?CUSTOM_RELEASE} %{!?CUSTOM_RELEASE:%RELEASE}
%define prefix		/usr
%define canvaspackage	%(if rpm -q redhat-release &> /dev/null; then echo gdk-pixbuf-gnome; elif rpm -q mandrake-release &> /dev/null; then echo gdk-pixbuf-gnomecanvas; else echo; fi)
%define canvaslib	%(if rpm -q mandriva-release &> /dev/null; then echo libgnomecanvas2; else echo libgnomecanvas; fi)

Summary: Educational suite for kids 2-10 years old
Name: 		%name
Version: 	%version
Release: 	%rel
License: 	GPL
Group: 		Games/Other
Source:		ftp://gcompris.sourceforge.net/gcompris-%{PACKAGE_VERSION}.tar.gz
BuildRoot: 	%_tmppath/%name-%version-buildroot
Buildrequires: gnuchess gnucap
Buildrequires: libxml2-devel libgnomeui2-devel libsqlite3_0-devel
Buildrequires: texinfo 
# (misc) needed for python support
Buildrequires: gnome-python python-devel pygtk2.0-devel 
Requires:	gnome-libs libxml2 gdk-pixbuf %canvaspackage %canvaslib
Requires:       gnuchess >= 5.02
Requires:       @REQUIRE_PYTHON@
Requires:	libSDL_mixer1.2
Requires:	libsqlite3_0
Packager:       Bruno Coudoin <bcoudoin.coudoin@free.fr>
URL: 		http://gcompris.net

%description
GCompris / I Got IT is an educationnal game for children starting at 2.
More than 100 different activities are proposed:
* Click on the animals => learn the mouse/click usage
* Type the falling letters => learn the keyboard usage
* Falling Dices
* Falling words
* Basic algebra
* Time learning with an analog clock
* Puzzle game with famous paintings
* Drive Plane to catch clouds in increasing number
* Balance the scales
* And much more ...

The Game is included in the Main desktop menu in 'Games'.

You should install it only if you have children using this computer.

%description -l fr
GCompris / J'ai Compris est un logiciel éducatif pour les enfants 
à partir de 2 ans.

Plus de 100 activités sont proposées :
* Cliquer sur les animaux => apprentissage du click et de la souris
* Entrer les lettres qui tombent => Apprentissage du clavier
* Les dés qui tombent
* Les mots qui tombent
* Algèbre simple
* Apprentissage de la lecture de l'heure sur une horloge analogique
* Puzzle avec des tableaux célèbres
* Pilote un avion pour attraper les nuages dans l'ordre
* Equilibre la balance
* ...

Le jeu est inclus dans les icones sous le menu Jeux.

A installer si vous avez des enfants utilisant cet ordinateur.

%package devel
Summary:        Development package for gcompris
Group: 		Amusements/Games
Version: %version

%description devel
Development package for gcompris

%package -n assetml-voices-cs
Summary:        GCompris Czech voices
Group: 		Amusements/Games
Version: @VERSION_VOICES_CS@

%description -n assetml-voices-cs
Czech voices for the GCompris game


%package -n assetml-voices-da
Summary:        GCompris Danish voices
Group: 		Amusements/Games
Version: @VERSION_VOICES_DA@

%description -n assetml-voices-da
Danish voices for the GCompris game


%package -n assetml-voices-de
Summary:        GCompris voices in German
Group: 		Amusements/Games
Version: @VERSION_VOICES_DE@

%description -n assetml-voices-de
Alphabet voices in German


%package -n assetml-voices-en
Summary:        GCompris voices in English
Group: 		Amusements/Games
Version: @VERSION_VOICES_EN@

%description -n assetml-voices-en
English voices for the GCompris game


%package -n assetml-voices-es
Summary:        GCompris voices in Spanish
Group: 		Amusements/Games
Version: @VERSION_VOICES_ES@

%description -n assetml-voices-es
Spanish voices for the GCompris game


%package -n assetml-voices-eu
Summary:        GCompris voices in Basque
Group: 		Amusements/Games
Version: @VERSION_VOICES_EU@

%description -n assetml-voices-eu
Basque voices for the GCompris game


%package -n assetml-voices-fi
Summary:        GCompris voices in Finish
Group: 		Amusements/Games
Version: @VERSION_VOICES_FI@

%description -n assetml-voices-fi
Finish voices for the GCompris game


%package -n assetml-voices-fr
Summary:        GCompris voices in French
Group: 		Amusements/Games
Version: @VERSION_VOICES_FR@

%description -n assetml-voices-fr
French voices for the GCompris game


%package -n assetml-voices-hu
Summary:        GCompris voices in Hungarian
Group: 		Amusements/Games
Version: @VERSION_VOICES_HU@

%description -n assetml-voices-hu
Hungarian voices for the GCompris game


%package -n assetml-voices-it
Summary:        GCompris voices in Italian
Group: 		Amusements/Games
Version: @VERSION_VOICES_IT@

%description -n assetml-voices-it
Italian voices for the GCompris game


%package -n assetml-voices-nl
Summary:        GCompris voices in Dutch
Group: 		Amusements/Games
Version: @VERSION_VOICES_NL@

%description -n assetml-voices-nl
Dutch voices for the GCompris game


%package -n assetml-voices-mr
Summary:        GCompris voices in Marathi
Group: 		Amusements/Games
Version: @VERSION_VOICES_MR@

%description -n assetml-voices-mr
Marathi voices for the GCompris game


%package -n assetml-voices-pt
Summary:        GCompris voices in Portuguese
Group: 		Amusements/Games
Version: @VERSION_VOICES_PT@

%description -n assetml-voices-pt
Portuguese voices for the GCompris game


%package -n assetml-voices-pt-br
Summary:        GCompris voices in Brasilian
Group: 		Amusements/Games
Version: @VERSION_VOICES_PT_BR@

%description -n assetml-voices-pt-br
Brasilian voices for the GCompris game


%package -n assetml-voices-ru
Summary:        GCompris voices in Russian
Group: 		Amusements/Games
Version: @VERSION_VOICES_RU@

%description -n assetml-voices-ru
Russian voices for the GCompris game


%package -n assetml-voices-sv
Summary:        Alphabet voices in Swedish
Group: 		Amusements/Games
Version: @VERSION_VOICES_SV@

%description -n assetml-voices-sv
Alphabet voices in Swedish

%prep
%setup -q

%build
%ifarch alpha
  MYARCH_FLAGS="--host=alpha-redhat-linux"
%endif
%configure 

%make


%install
rm -rf $RPM_BUILD_ROOT
%makeinstall_std


%clean
rm -rf $RPM_BUILD_ROOT

%post 

%update_menus

%_install_info %{name}.info

%postun 

%clean_menus

%preun

%_remove_install_info %{name}.info

%files
%defattr(-, root, root)
%doc AUTHORS COPYING ChangeLog NEWS README
%_bindir/*

%dir %_libdir/%{name}/
%_libdir/%{name}/*
%_libdir/libgcompris-1.so.0.0.0
%_libdir/libgcompris-1.so.0

%_menudir/*
%dir %{prefix}/share/gcompris
%dir %{prefix}/share/gcompris/boards
%dir %{prefix}/share/gcompris/boards/skins
%{prefix}/share/gcompris/boards/skins/*
%{prefix}/share/gcompris/boards/[^s]*
%{prefix}/share/gcompris/boards/s[tcemu]*
%{prefix}/share/gcompris/boards/sound_group*
%dir %{prefix}/share/gcompris/boards/sounds
%{prefix}/share/gcompris/boards/sounds/*.ogg
%{prefix}/share/gcompris/boards/sounds/melody/*/*.ogg
%{prefix}/share/gcompris/boards/sounds/memory/*.ogg
%{prefix}/share/gcompris/boards/sounds/chronos/space/*.ogg
%{prefix}/share/gcompris/boards/sounds/LuneRouge/*
%{prefix}/share/gcompris/boards/sounds/HOWTO_ENCODE
%dir %{prefix}/share/gcompris/python
%{prefix}/share/gcompris/python/*
%{prefix}/share/applications/*
%{prefix}/share/locale/*/*/*
%{prefix}/share/pixmaps/*.png
%_infodir/*
%_mandir/*

%files devel
%dir %_includedir/libgcompris-1.0/libgcompris
%_includedir/libgcompris-1.0/libgcompris/*
%dir %_libdir
%_libdir/libgcompris-1.la
%_libdir/libgcompris-1.so
%_libdir/pkgconfig/libgcompris-1.0.pc

%files -n assetml-voices-cs
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/cs

%files -n assetml-voices-da
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/da

%files -n assetml-voices-de
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/de

%files -n assetml-voices-en
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/en

%files -n assetml-voices-es
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/es

%files -n assetml-voices-eu
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/eu

%files -n assetml-voices-fi
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/fi

%files -n assetml-voices-fr
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/fr

%files -n assetml-voices-hu
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/hu

%files -n assetml-voices-it
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/it

%files -n assetml-voices-mr
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/mr

%files -n assetml-voices-nl
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/nl

%files -n assetml-voices-pt
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/pt

%files -n assetml-voices-pt-br
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/pt_BR

%files -n assetml-voices-ru
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/ru

%files -n assetml-voices-sv
%defattr(-, root, root)
%{prefix}/share/gcompris/boards/sounds/sv
